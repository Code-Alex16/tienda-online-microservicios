<div class="order-detail-container">
  <h2>Detalles del Pedido #{{ order?.id_pedido }}</h2>

  <div *ngIf="!order && !errorMessage" class="loading-message">
    <p>Cargando detalles del pedido...</p>
  </div>

  <div *ngIf="errorMessage" class="error-message">
    <p>{{ errorMessage }}</p>
    <button routerLink="/orders" class="go-back-btn">Volver al Historial de Pedidos</button>
  </div>

  <div *ngIf="order" class="order-details-card">
    <div class="order-summary">
      <p><strong>Fecha del Pedido:</strong> {{ order.fecha_pedido | date:'fullDate' }}</p>
      <p><strong>Estado:</strong> <span class="status status-{{ order.estado | lowercase }}">{{ order.estado }}</span></p>
      <p class="total"><strong>Total del Pedido:</strong> ${{ order.total | number:'1.2-2' }}</p>
    </div>

    <h3>Productos del Pedido:</h3>
    <div *ngIf="order.detalles && order.detalles.length > 0" class="order-items-list">
      <table>
        <thead>
          <tr>
            <th>Producto</th>
            <th>Cantidad</th>
            <th>Precio Unitario</th>
            <th>Subtotal</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of order.detalles">
            <td>{{ item.nombre_producto }}</td>
            <td>{{ item.cantidad }}</td>
            <td>${{ item.precio_unitario | number:'1.2-2' }}</td>
            <td>${{ (item.cantidad * item.precio_unitario) | number:'1.2-2' }}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div *ngIf="!order.detalles || order.detalles.length === 0" class="no-details">
      <p>No se encontraron detalles para este pedido.</p>
    </div>

    <button routerLink="/orders" class="go-back-btn">Volver al Historial de Pedidos</button>
  </div>
</div>